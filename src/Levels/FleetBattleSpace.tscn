[gd_scene load_steps=24 format=2]

[ext_resource path="res://SupportShip.tscn" type="PackedScene" id=1]
[ext_resource path="res://CapitalShip.tscn" type="PackedScene" id=2]
[ext_resource path="res://AttackShip.tscn" type="PackedScene" id=3]
[ext_resource path="res://WaitingCam.gd" type="Script" id=4]
[ext_resource path="res://src/AsteroidFieldTest/AsteroidField.tscn" type="PackedScene" id=5]
[ext_resource path="res://WorldEnvironment.gd" type="Script" id=6]
[ext_resource path="res://assets/LevelWorldEnvironment.tres" type="Environment" id=7]
[ext_resource path="res://SpawnHUD.tscn" type="PackedScene" id=8]
[ext_resource path="res://src/Levels/DebugSpace.gd" type="Script" id=9]
[ext_resource path="res://PilotManager.gd" type="Script" id=10]
[ext_resource path="res://MatchUI.tscn" type="PackedScene" id=11]
[ext_resource path="res://addons/motion_blur/motion_blur.tscn" type="PackedScene" id=12]
[ext_resource path="res://ShipCamera.gd" type="Script" id=13]
[ext_resource path="res://src/PauseMenu.tscn" type="PackedScene" id=14]
[ext_resource path="res://addons/silicon.vfx.lens_flare/lens_flare.gd" type="Script" id=15]
[ext_resource path="res://addons/silicon.vfx.lens_flare/lens_dirt_default.jpeg" type="Texture" id=16]
[ext_resource path="res://src/PostProcessing/ChromaticAberration/ChromaticAberrationPro.gdshader" type="Shader" id=17]

[sub_resource type="BakedLightmapData" id=6]

[sub_resource type="ShaderMaterial" id=5]
shader = ExtResource( 17 )
shader_param/intensity = 0.5

[sub_resource type="CubeMesh" id=1]

[sub_resource type="SpatialMaterial" id=2]
albedo_color = Color( 1, 0, 0, 1 )

[sub_resource type="SpatialMaterial" id=3]
albedo_color = Color( 0, 0.0745098, 1, 1 )

[sub_resource type="SpatialMaterial" id=4]
albedo_color = Color( 1, 0.0745098, 1, 1 )

[node name="DebugSpace" type="Spatial"]
script = ExtResource( 9 )

[node name="PauseMenu" parent="." instance=ExtResource( 14 )]
layer = 3

[node name="SpawnHUD" parent="." instance=ExtResource( 8 )]
layer = 2
battle_state_path = NodePath("..")

[node name="MatchUI" parent="." instance=ExtResource( 11 )]
blue_support_ship1 = NodePath("../BigShips/SuportShip")
blue_support_ship2 = NodePath("../BigShips/SuportShip2")
red_support_ship1 = NodePath("../BigShips/SuportShip3")
red_support_ship2 = NodePath("../BigShips/SuportShip4")

[node name="BakedLightmap" type="BakedLightmap" parent="."]
transform = Transform( -2.18557e-07, 0, 1, 0, 1, 0, -1, 0, -2.18557e-07, -2723.4, 1980.32, -0.112518 )
extents = Vector3( 290.955, 27.4104, 138.449 )
quality = 0
bounces = 2
atlas_generate = false
atlas_max_size = 32768
environment_mode = 1
capture_enabled = false
light_data = SubResource( 6 )

[node name="PostProcessing" type="CanvasLayer" parent="."]

[node name="ChromaticAberrationPro" type="Control" parent="PostProcessing"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="ColorRect" type="ColorRect" parent="PostProcessing/ChromaticAberrationPro"]
material = SubResource( 5 )
anchor_right = 1.0
anchor_bottom = 1.0

[node name="LensFlare" type="Node" parent="PostProcessing"]
script = ExtResource( 15 )
flare_strength = 1.0
flare_bias = 1.05
flare_blur = 2.0
distortion_quality = 0
distortion = 2.0
ghost_count = 7
ghost_spacing = 0.3
halo_width = 0.25
streak_strength = 0.5
lens_dirt = ExtResource( 16 )

[node name="BigShips" type="Spatial" parent="."]

[node name="CapitalShipRed" parent="BigShips" instance=ExtResource( 2 )]
unique_name_in_owner = true
transform = Transform( -2.18557e-07, 0, 1, 0, 1, 0, -1, 0, -2.18557e-07, -3000, 2019.41, 0.00088501 )
collision_layer = 1

[node name="CapitalShipBlue" parent="BigShips" instance=ExtResource( 2 )]
unique_name_in_owner = true
transform = Transform( 1.31134e-07, 0, -1, 0, 1, 0, 1, 0, 1.31134e-07, 2996, 2019.41, -0.000152588 )
collision_layer = 1
blue_team = true

[node name="SuportShip" parent="BigShips" instance=ExtResource( 1 )]
transform = Transform( -2.18557e-07, 0, 1, 0, 1, 0, -1, 0, -2.18557e-07, -2000, 2019.41, 715.453 )
collision_layer = 1

[node name="SuportShip2" parent="BigShips" instance=ExtResource( 1 )]
transform = Transform( -2.18557e-07, 0, 1, 0, 1, 0, -1, 0, -2.18557e-07, -2000, 2019.41, -790.847 )
collision_layer = 1

[node name="AttackShip2" parent="BigShips" instance=ExtResource( 3 )]
transform = Transform( -2.18557e-07, 0, 1, 0, 1, 0, -1, 0, -2.18557e-07, -2696.04, 2450.62, -726.322 )
collision_layer = 1

[node name="SuportShip3" parent="BigShips" instance=ExtResource( 1 )]
transform = Transform( 3.0598e-07, 0, -1, 0, 1, 0, 1, 0, 3.0598e-07, 2000, 2019.41, -643.399 )
collision_layer = 1
blue_team = true

[node name="SuportShip4" parent="BigShips" instance=ExtResource( 1 )]
transform = Transform( 3.0598e-07, 0, -1, 0, 1, 0, 1, 0, 3.0598e-07, 2000, 2019.41, 787.622 )
collision_layer = 1
blue_team = true

[node name="AttackShip3" parent="BigShips" instance=ExtResource( 3 )]
transform = Transform( 3.0598e-07, 0, -1, 0, 1, 0, 1, 0, 3.0598e-07, 2748.31, 1718.9, -963.107 )
collision_layer = 1
blue_team = true

[node name="WaitingCam" type="Camera" parent="."]
transform = Transform( 0.967628, -0.173311, 0.183468, 0.0746351, 0.890927, 0.447971, -0.241094, -0.419776, 0.875021, 1060.39, 3512.45, 2512.19 )
cull_mask = 1048571
current = true
far = 6000.0
script = ExtResource( 4 )

[node name="Environment" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2000, 0 )

[node name="AsteroidField" parent="Environment" instance=ExtResource( 5 )]
start_roids = 1

[node name="WorldEnvironment" type="WorldEnvironment" parent="Environment"]
environment = ExtResource( 7 )
script = ExtResource( 6 )

[node name="DirectionalLight" type="DirectionalLight" parent="Environment"]
transform = Transform( 0.70866, 0.457789, 0.53687, -0.635008, 0.082185, 0.768121, 0.307515, -0.885254, 0.348941, 0, -1942.97, 0 )
light_energy = 2.0
shadow_enabled = true
directional_shadow_max_distance = 200.0

[node name="DirectionalLight2" type="DirectionalLight" parent="Environment"]
transform = Transform( 0.279008, -0.793125, -0.541394, -0.464626, 0.381903, -0.79892, 0.840403, 0.474451, -0.261953, 0, -1938.66, 0 )
light_energy = 0.4
shadow_enabled = true

[node name="PilotManagers" type="Node" parent="."]

[node name="PlayerMan" type="Node" parent="PilotManagers"]
script = ExtResource( 10 )
is_player = true

[node name="RedPoint" type="MeshInstance" parent="."]
transform = Transform( 7.13262, 0, 0, 0, 0.3, 0, 0, 0, 3000, -21.9825, 2000, 0.0334425 )
visible = false
mesh = SubResource( 1 )
skeleton = NodePath("")
material/0 = SubResource( 2 )

[node name="BluePoint" type="MeshInstance" parent="."]
transform = Transform( 5.19245, 0, 0, 0, 0.3, 0, 0, 0, 3000, 2.29866, 2000, 0 )
visible = false
mesh = SubResource( 1 )
skeleton = NodePath("")
material/0 = SubResource( 3 )

[node name="MiddlePoint" type="MeshInstance" parent="."]
transform = Transform( 5.19245, 0, 0, 0, 0.3, 0, 0, 0, 3000, 46.9043, 2000, 0 )
visible = false
mesh = SubResource( 1 )
skeleton = NodePath("")
material/0 = SubResource( 4 )

[node name="PlayerShipCam" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.9301, 12.6019 )
far = 10000.0
script = ExtResource( 13 )

[node name="motion_blur" parent="PlayerShipCam" instance=ExtResource( 12 )]
visible = false

[connection signal="start_battle" from="SpawnHUD" to="." method="start_battle"]

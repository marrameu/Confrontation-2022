[gd_scene load_steps=17 format=3 uid="uid://1xsdx7asfkeq"]

[ext_resource type="PackedScene" uid="uid://bdurwr0lwd8oq" path="res://src/Troops/TroopBase.tscn" id="1"]
[ext_resource type="PackedScene" path="res://src/Troops/Weapons/Pistol.tscn" id="2"]
[ext_resource type="PackedScene" uid="uid://uvvffdmkg3ds" path="res://src/Bullets/HeadshotBullet.tscn" id="3"]
[ext_resource type="Script" path="res://src/Troops/PlayerTroopShooting.gd" id="4"]
[ext_resource type="Script" path="res://src/Troops/Interact.gd" id="5"]
[ext_resource type="PackedScene" path="res://src/HUD/PlayerHUD.tscn" id="6"]
[ext_resource type="Script" path="res://src/Troops/Player.gd" id="7"]
[ext_resource type="Script" path="res://src/Troops/Walk.gd" id="8"]

[sub_resource type="Animation" id="82"]
resource_name = "Melee"
length = 1.6
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Model/MeleeHitBox/CollisionShape3D:disabled")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [true, false, true]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("StateMachine/Melee")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.5),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"impulse"
}]
}

[sub_resource type="Animation" id="83"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CollisionShape3D:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 1.7749, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CollisionShape3D:shape:height")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [2.4]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("CollisionShape3D:shape:radius")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.6]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Model/MeleeHitBox/CollisionShape3D:disabled")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [true]
}

[sub_resource type="Animation" id="84"]
resource_name = "Reload"
length = 4.2
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Shooting")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(3.8),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"reload_current_weapon"
}]
}

[sub_resource type="Animation" id="85"]
resource_name = "Roll"
length = 2.4
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CollisionShape3D:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.4, 1.5, 1.8),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 1.7961, 0), Vector3(0, 0.941721, 0), Vector3(0, 0.941721, 0), Vector3(0, 1.7961, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CollisionShape3D:shape:height")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.4, 1.5, 1.8),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [2.4, 0.8, 0.8, 2.4]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("StateMachine/Roll")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.4),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"impulse"
}]
}

[sub_resource type="Animation" id="86"]
resource_name = "ThrowGrenade"
length = 2.767
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Shooting/LaunchGrenade")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(2),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"launch_granade"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_j3age"]
_data = {
"Melee": SubResource("82"),
"RESET": SubResource("83"),
"Reload": SubResource("84"),
"Roll": SubResource("85"),
"ThrowGrenade": SubResource("86")
}

[sub_resource type="AnimationNodeStateMachinePlayback" id="1"]

[sub_resource type="AnimationNodeStateMachinePlayback" id="2"]

[node name="Player" instance=ExtResource("1")]
collision_mask = 11
platform_wall_layers = 9
script = ExtResource("7")

[node name="GeneralSkeleton" parent="Model/Armature" index="0"]
bones/0/position = Vector3(0.0033332, 0.960647, -0.00599851)
bones/0/rotation = Quaternion(-0.109678, -0.340427, -0.0270192, 0.933461)
bones/1/rotation = Quaternion(0.0591017, -0.000415305, 0.00153531, 0.998251)
bones/2/rotation = Quaternion(0.134165, -5.37961e-05, -0.00579159, 0.990942)
bones/3/rotation = Quaternion(0.138096, -0.000492096, -0.00572442, 0.990402)
bones/4/rotation = Quaternion(0.00572139, 0.0651868, 0.00752834, 0.997828)
bones/5/rotation = Quaternion(-0.0379282, 0.192018, 0.090074, 0.976513)
bones/6/position = Vector3(-1.46873e-05, 0.184747, 0.066364)
bones/7/rotation = Quaternion(-0.603141, -0.66464, -0.31328, 0.31037)
bones/8/rotation = Quaternion(0.224965, 0.813894, -0.470778, 0.255609)
bones/9/rotation = Quaternion(0.37638, -0.59858, 0.37638, 0.598647)
bones/10/rotation = Quaternion(-0.262575, -0.243574, -0.0793193, 0.930287)
bones/11/rotation = Quaternion(0.102307, 0.577991, 0.375946, 0.717025)
bones/12/rotation = Quaternion(0.101908, 0.147192, 0.0263197, 0.983492)
bones/13/rotation = Quaternion(-0.087476, 0.0340373, 0.00416225, 0.995576)
bones/14/position = Vector3(0.00801098, 0.0333517, 0.00462563)
bones/15/rotation = Quaternion(0.315441, -0.0126319, -0.0319099, 0.948324)
bones/16/rotation = Quaternion(0.49866, -6.4144e-06, -0.051101, 0.86529)
bones/17/rotation = Quaternion(0.209056, -2.77162e-06, -0.0214234, 0.977669)
bones/18/position = Vector3(4.78639e-08, 0.0307801, -2.73264e-06)
bones/19/rotation = Quaternion(0.441362, -0.0180026, -0.0447932, 0.896029)
bones/20/rotation = Quaternion(0.536445, -5.31148e-06, -0.0549731, 0.842143)
bones/21/rotation = Quaternion(0.154932, -1.40071e-06, -0.015877, 0.987798)
bones/22/position = Vector3(-3.10764e-07, 0.0368021, -3.21162e-06)
bones/23/rotation = Quaternion(0.507354, -0.0259772, -0.0427682, 0.860284)
bones/24/rotation = Quaternion(0.586003, -9.90182e-06, -0.0600516, 0.80808)
bones/25/rotation = Quaternion(0.222639, -3.74019e-06, -0.0228154, 0.974634)
bones/26/position = Vector3(4.75204e-08, 0.0366012, -3.38751e-06)
bones/27/rotation = Quaternion(0.592365, -0.0693951, 0.00149885, 0.802674)
bones/28/rotation = Quaternion(0.528815, -0.000245966, -0.0541909, 0.847005)
bones/29/rotation = Quaternion(0.121549, -3.69985e-07, -0.012456, 0.992507)
bones/30/position = Vector3(-1.76365e-07, 0.0292387, -2.40289e-06)
bones/31/rotation = Quaternion(0.660651, -0.614856, -0.217011, -0.372019)
bones/32/rotation = Quaternion(-0.546351, 0.660605, -0.495431, 0.140176)
bones/33/rotation = Quaternion(0.535837, 0.461434, -0.535837, 0.461341)
bones/34/rotation = Quaternion(-0.287637, -0.336872, 0.0541945, 0.894899)
bones/35/rotation = Quaternion(0.181366, -0.539536, -0.464914, 0.678132)
bones/36/rotation = Quaternion(0.233845, -0.156387, 0.114967, 0.952703)
bones/37/rotation = Quaternion(0.366522, 0.0239439, 0.325531, 0.871274)
bones/38/position = Vector3(-0.00800578, 0.0333528, 0.0046264)
bones/39/rotation = Quaternion(0.108216, 0.00638902, -0.0154326, 0.993987)
bones/40/rotation = Quaternion(0.282951, -2.26498e-06, 0.0230495, 0.958857)
bones/41/rotation = Quaternion(0.2567, -2.22027e-06, 0.0209114, 0.966265)
bones/42/position = Vector3(2.38219e-07, 0.0307799, 2.70218e-06)
bones/43/rotation = Quaternion(0.43161, 0.000449897, 0.0694106, 0.899386)
bones/44/rotation = Quaternion(0.8193, -6.41495e-06, 0.0667418, 0.569467)
bones/45/rotation = Quaternion(0.1632, -1.16229e-06, 0.0132946, 0.986504)
bones/46/position = Vector3(3.72911e-07, 0.0368019, 3.18792e-06)
bones/47/rotation = Quaternion(0.477497, 0.0365017, 0.00597519, 0.877855)
bones/48/rotation = Quaternion(0.761888, -5.29158e-07, 0.0620651, 0.644728)
bones/49/rotation = Quaternion(0.425279, -2.0223e-07, 0.0346442, 0.904399)
bones/50/position = Vector3(4.95259e-08, 0.0366011, 3.23637e-06)
bones/51/rotation = Quaternion(0.534611, 0.0448625, 0.00571764, 0.843887)
bones/52/rotation = Quaternion(0.658062, 5.05894e-06, 0.0536071, 0.751054)
bones/53/rotation = Quaternion(0.497383, -6.86198e-06, 0.040518, 0.866585)
bones/54/position = Vector3(6.68e-08, 0.0292387, 2.60201e-06)
bones/55/rotation = Quaternion(-0.396844, -0.0695013, -0.903046, 0.148968)
bones/56/rotation = Quaternion(0.00853979, 0.983132, -0.182697, -0.000978629)
bones/57/rotation = Quaternion(-0.00258114, 0.724619, -0.688598, 0.0274381)
bones/58/rotation = Quaternion(-6.60191e-08, 1, 3.8743e-07, 2.38722e-08)
bones/59/position = Vector3(-0.00142061, 0.0999745, 0.00175223)
bones/60/rotation = Quaternion(0.0469531, -0.0346177, 0.997158, 0.0476837)
bones/61/rotation = Quaternion(-0.008107, 0.964925, -0.262156, -0.0112829)
bones/62/rotation = Quaternion(-0.0521399, 0.560739, -0.814155, -0.141439)
bones/63/rotation = Quaternion(3.10599e-08, 1, -3.45895e-05, 2.26808e-08)
bones/64/position = Vector3(0.00141798, 0.0999746, 0.00175009)

[node name="BoneAttachment3D" parent="Model/Armature/GeneralSkeleton" index="2"]
transform = Transform3D(0.764101, 0.636788, -0.0985245, -0.253439, 0.156474, -0.953977, -0.592861, 0.754242, 0.281178, -0.0918235, 1.391, 0.246642)

[node name="Pistol" parent="Model/Armature/GeneralSkeleton/BoneAttachment3D/Weapons" index="0" instance=ExtResource("2")]
bullet_scene = ExtResource("3")

[node name="Shooting" parent="." index="2"]
script = ExtResource("4")

[node name="HealthSystem" parent="." index="3"]
MAX_HEALTH = 300

[node name="Walk" parent="StateMachine" index="0"]
script = ExtResource("8")
MAX_SPEED = 5.0

[node name="AnimationPlayer" parent="." index="5"]
libraries = {
"": SubResource("AnimationLibrary_j3age")
}

[node name="AnimationTree" parent="." index="6"]
parameters/StateMachine/playback = SubResource("1")
parameters/StateMachine/walk/OneShotStateMachine/playback = SubResource("2")

[node name="Interact" type="Node" parent="." index="7"]
script = ExtResource("5")
interaction_progress_path = NodePath("../PlayerHUD/Alive/InteractionProgress")

[node name="Timer" type="Timer" parent="Interact" index="0"]
one_shot = true

[node name="PlayerHUD" parent="." index="8" instance=ExtResource("6")]
launch_grenade_path = NodePath("../Shooting/LaunchGrenade")

[node name="RedRect" parent="PlayerHUD" index="0"]
anchors_preset = 15
grow_horizontal = 2
grow_vertical = 2

[node name="DieInfo" parent="PlayerHUD" index="1"]
anchors_preset = 7
offset_top = -44.0
offset_bottom = 0.0
grow_horizontal = 2
grow_vertical = 0

[node name="TextureRect" parent="PlayerHUD/DieInfo" index="0"]
layout_mode = 1
anchors_preset = 15
grow_horizontal = 2
grow_vertical = 2

[node name="Alive" parent="PlayerHUD" index="2"]
layout_mode = 3
anchors_preset = 15
grow_horizontal = 2
grow_vertical = 2

[node name="InteractionProgress" parent="PlayerHUD/Alive" index="0"]
layout_mode = 1
anchors_preset = 8
offset_left = -29.0
offset_top = -29.0
offset_right = 29.0
offset_bottom = 29.0
grow_horizontal = 2
grow_vertical = 2

[node name="MyLifeBar" parent="PlayerHUD/Alive" index="1"]
layout_mode = 1
anchors_preset = 7
offset_top = -22.0
offset_bottom = 0.0
grow_horizontal = 2
grow_vertical = 0

[node name="LifeBarEnemy" parent="PlayerHUD/Alive" index="2"]
layout_mode = 0

[node name="LifeBar" parent="PlayerHUD/Alive/LifeBarEnemy" index="0"]
layout_mode = 2
offset_bottom = 1.0

[node name="Nickname" parent="PlayerHUD/Alive/LifeBarEnemy" index="1"]
layout_mode = 2
offset_top = 5.0

[node name="SpeiclaWeapons" parent="PlayerHUD/Alive" index="3"]
layout_mode = 1
anchors_preset = 3
offset_left = -200.0
offset_top = -72.0
offset_right = 0.0
offset_bottom = 0.0
grow_horizontal = 0
grow_vertical = 0

[node name="TextureRect" parent="PlayerHUD/Alive/SpeiclaWeapons" index="0"]
layout_mode = 2
offset_left = 75.0

[node name="TextureRect2" parent="PlayerHUD/Alive/SpeiclaWeapons/TextureRect" index="0"]
layout_mode = 1
anchors_preset = 8
grow_horizontal = 2
grow_vertical = 2

[node name="Label" parent="PlayerHUD/Alive/SpeiclaWeapons/TextureRect" index="1"]
layout_mode = 1
anchors_preset = 3
offset_left = -12.0
offset_right = 0.0

[node name="Label2" parent="PlayerHUD/Alive/SpeiclaWeapons/TextureRect" index="2"]
layout_mode = 1
anchors_preset = 2
offset_left = 0.0
offset_right = 12.0

[node name="Label2" parent="PlayerHUD/Alive/SpeiclaWeapons" index="1"]
layout_mode = 2

[node name="Label3" parent="PlayerHUD/Alive/SpeiclaWeapons" index="2"]
layout_mode = 2

[node name="DamageIndicators" parent="PlayerHUD/Alive" index="4"]
layout_mode = 1
anchors_preset = 8
grow_horizontal = 2
grow_vertical = 2

[node name="Points" parent="PlayerHUD" index="3"]
offset_right = 1160.0
offset_bottom = 846.0

[node name="CamPos" type="Marker3D" parent="." index="9"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)

[node name="AudioListener3D" type="AudioListener3D" parent="." index="10"]
current = true

[node name="Tail" parent="." index="13"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0681257, 0)

[connection signal="timeout" from="Interact/Timer" to="Interact" method="_on_Timer_timeout"]

[editable path="Model"]
[editable path="PlayerHUD"]
